# Joojit  
### Conversational Ledger & Cognitive Mirror System  
*by Mute Logic Lab — Salvador, Bahia (2025)*

> *A browser that dreams of its own thoughts.*

## Overview

**Joojit** is a browser-based cognitive interface that transforms chat sessions into recursive visualizations.  
It functions as both a **conversation ledger** and a **semantic mirror** — recording, analyzing, and rendering the geometry of dialogue itself.

Built with **Flask** (Python) + **JavaScript**, it combines natural language analysis, affect mapping, and browser-local data persistence to model **how conversations think**.

Each session is stored locally, analyzed semantically, and displayed as both text and constellation.

---

## System Architecture

### Backend — *Flask + Affect Engine*
- `app.py` — hosts API endpoints `/analyze` and `/export`.  
- `affect.py` — processes affective and semantic metrics using:
  - **NRC Emotion Lexicon** (`English-NRC-EmoLex.txt`) for valence and emotion tagging:contentReference[oaicite:3]{index=3}.
  - **scikit-learn** and **numpy** for coherence, drift, and resonance calculations.  
  - Outputs analytic fields per turn:
    ```
    coherence, drift, entropy, resonance, volatility, novelty, cluster
    ```

- The backend returns structured JSON to the browser, which visualizes each turn’s metric field.

### Frontend — *Ledger + Visualization*
- `joojit.js` — manages local sessions, exports, and multi-window navigation between:
  - **Spiral** — main chat interface.  
  - **Spores** — reflective text space.  
  - **Throttle** — performance and rhythm module.  
  - **Constellation** — 2D/3D visualization of conversation networks:contentReference[oaicite:4]{index=4}.
- `metrics.js` — handles semantic computation and logs preview metrics in-browser:contentReference[oaicite:5]{index=5}.
- `recursive.jsonl` — defines internal mappings for recursive response generation and reflective feedback.

### Ledger Layer
- Conversations are automatically stored in `localStorage` under `ledgerStore`.  
- Each entry logs:
  ```json
  {
    "id": "uuid",
    "timestamp": "ISO8601",
    "prompt": "user text",
    "reply": "model response",
    "model": "GPT-x",
    "latency_ms": 1220
  }
````

* Sessions can be **exported** as `.jsonl` files via the `/export` endpoint for archival or further analysis.

---

## Local Setup

### 1. Clone

```bash
git clone https://github.com/<username>/joojit.git
cd joojit
```

### 2. Install Dependencies

```bash
pip install -r requirements.txt
```

*(Includes Flask, Flask-CORS, openai, numpy, scikit-learn, langid, langdetect.)*

### 3. Run the Server

```bash
python app.py
```

By default, Flask runs on `http://127.0.0.1:5001`.

### 4. Launch the Interface

Open:

```
http://localhost:5001/joojit.html
```

The page will automatically connect to the backend and initialize a new session in `localStorage`.

---

## Semantic Metrics (Generated by Backend)

| Metric         | Description                                                 |
| -------------- | ----------------------------------------------------------- |
| **Coherence**  | Lexical and semantic stability within local context.        |
| **Drift**      | Degree of thematic deviation between turns.                 |
| **Entropy**    | Variability in lexical or affective density.                |
| **Resonance**  | Overlap between user and model embeddings.                  |
| **Volatility** | Rate of affect change between sequential turns.             |
| **Novelty**    | Introduction of unobserved lexical clusters.                |
| **Cluster**    | k-means grouping of turns into interpretive constellations. |

Each metric is stored per message and can be rendered into the constellation field for spatial visualization.

---

## Visualization Layer — *Constellation Mode*

* `constellation.html` renders embeddings as luminous nodes with hoverable tooltips (prompt ↔ response).
* Color encodes **affect polarity** (joy, sadness, fear, trust).
* Node size encodes **resonance** (degree of semantic mirroring).
* Drift vectors form a **web of cognitive gravity** between turns.

The result: an evolving topography of your thought’s geometry.

---

## Local Ledger System

| Feature                      | Function                                                 |
| ---------------------------- | -------------------------------------------------------- |
| `newSession()`               | Initialize a new ledger session and clear the viewport.  |
| `saveTurn()`                 | Append prompt/reply pair with timestamp.                 |
| `exportLedger()`             | Save entire conversation as downloadable JSONL.          |
| `clearAllSessions()`         | Erase local history and restart the mind.                |
| `loadActiveSessionHistory()` | Reloads saved exchanges into the visible chat interface. |

The ledger is **browser-local only** — no data leaves your machine unless you explicitly export.

---

## Recursive Layer

`recursive.jsonl` defines archetypal turn structures used by Joojit’s reflection system.
Each object represents a **semantic recursion template**, guiding how responses fold back into prior turns — effectively giving the interface a “memory of its own topology.”

Example snippet:

```json
{"prompt": "reflect on your previous thought", "mode": "recursive", "depth": 3}
```

This enables experiments in **meta-dialogue**, where the conversation becomes a study of its own shape.

---

## Deployment

### Local / Development

```bash
python app.py
```

### Railway

Add to `railway.toml`:

```toml
[build]
builder = "NIXPACKS"
[deploy]
startCommand = "python app.py"
```

### Vercel

Deploy only the static front-end (HTML/JS).
Backend remains Flask-served (can be proxied via Railway or Render).

---

## Forward Trajectory

* [ ] Integrate transformer-based embeddings (OpenAI text-embedding-3-small).
* [ ] Add real-time constellation updates via WebSockets.
* [ ] Layer affect evolution timelines.
* [ ] Release **Joojit Studio** — standalone tool for semantic diary analysis.
* [ ] Implement Portuguese affect lexicon (2026).

---

## ✴ Coda

> *Each chat is a mirror.
> Each mirror, a recursion.
> Joojit keeps the record —
> not of what was said,
> but of how meaning moved.*

**Author:** [Javed Saunja Jaghai](https://javedjaghai.com)
**Lab:** Mute Logic Lab — Salvador, Bahia (2025)
**License:** MIT

---
